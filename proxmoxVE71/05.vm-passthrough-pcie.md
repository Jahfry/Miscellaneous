BIOS settings were handled in [this page], summary:

This guide is using ZFS on the host boot disk (rpool), so the rest of this assumes systemd boot. If you're using grub I'll drop some extra info but you'll want to look at that part of other guides to be sure. Similarly this guide is focused on AMD X570/Ryzen, so I'm not adding all Intel options. 

* Add the VFIO modules
    + NOTE: other Linux distributions may have these already built in to the kernel, but Proxmox still uses these as modules
        - Verify this via `cat /boot/config-5.13.19-6-pve |grep -i vfio` (update the name of 'config' for the kernel installed, it will change on updates)
        - Just something to be aware of as guides in the future will likely start omitting this step as it becomes unnecessary
    + Add these lines to '/etc/modules':
        - vfio
        - vfio_iommu_type1
        - vfio_pci
        - vfio_virqfd

```bash
# add this later
```    
* Add kernel boot parameters
    + systemd
        - Add this to '/etc/kernel/cmdline': " quiet amd_iommu=on iommu=pt"
    + grub 
        - Modify the this line in '/etc/default/grub': 
            * GRUB_CMDLINE_LINUX_DEFAULT=
            * Add this to that line: "quiet amd_iommu=on iommu=pt"
        - `proxmox-boot-tool refresh`

* Apply the above changes:
    + `proxmox-boot-tool refresh`
    + `update-ramfs -u -k all` (or `update-ramfs -u` to only update the current kernel)
        - NOTE: I'm unsure both of these are needed
            * if not, which is better?
            * Need to learn more about 'proxmox-boot-tool'

* Install and configure `driverctl`
    + **NOTES:**
        - I use driverctl *instead of blacklisting* as it allows you to reassign devices repeatedly and actually use modules normally blacklisted in other guides ([originally found here](https://www.heiko-sieger.info/blacklisting-graphics-driver/)).
        - If you only have 1 GPU device and override it below, **video output to your console monitor will stop**.
        - I have 2 GPUs but I'm overriding both below, which will also disconnect console output
        - You can get your console video back with a command also shown below
    + Use `iommu_list` (created on [this page](04.ProxmoxExtras.md)) to see the GPU device IDs. For my system they appear as:
        - <pre>IOMMU Group 28:
	0b:00.0 VGA compatible controller [0300]: NVIDIA Corporation Device [10de:2208] (rev a1)
	0b:00.1 Audio device [0403]: NVIDIA Corporation GA102 High Definition Audio Controller [10de:1aef] (rev a1)
IOMMU Group 29:
	0c:00.0 VGA compatible controller [0300]: NVIDIA Corporation GP106 [GeForce GTX 1060 6GB] [10de:1c03] (rev a1)
	0c:00.1 Audio device [0403]: NVIDIA Corporation GP106 High Definition Audio Controller [10de:10f1] (rev a1)</pre>

    + `apt install driverctl`
    + `driverctl set-override 0000:0b
